# 合同审查系统

一个基于AI的智能合同审查系统，支持多种文档格式的自动分析和风险评估。

## 功能特点

- 📄 支持多种文档格式：PDF、DOCX、TXT、DOC
- 🤖 AI智能分析：法律风险、商业风险、格式问题
- 🔄 工作流处理：依次执行解析→分析→建议→展示
- 📊 风险评估：提供详细的风险等级和评分
- 💡 修改建议：针对每个问题提供具体的修改建议
- 🎨 自动高亮：生成带高亮标记的审查文档

## 系统版本

### 工作流版本（推荐）
基于工作流的设计，依次执行四个步骤，更加清晰和可控。

### 多Agent版本（传统）
基于多智能体的设计，并行处理各种分析任务。

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 启动MCP服务

```bash
python mcp_service.py
```

### 3. 启动工作流版本（推荐）

```bash
streamlit run ui_workflow.py
```

### 4. 启动多Agent版本（传统）

```bash
python agents.py all
streamlit run ui_app.py
```

### 5. 使用系统

1. 在浏览器中打开 `http://localhost:8501`
2. 上传合同文件（支持PDF、DOCX、TXT、DOC格式）
3. 点击"开始分析"按钮
4. 查看分析结果和风险评估
5. 下载完整分析报告

## 工作流版本特点

### 处理流程
1. **📄 文档解析**: 使用MCP服务解析各种格式的合同文档
2. **🔍 风险分析**: 并行分析法律风险、商业风险、格式问题
3. **💡 建议生成**: 基于分析结果生成综合建议和签约建议
4. **📊 结果展示**: 以清晰的方式展示所有分析结果

### 优势
- **清晰的工作流**: 每个步骤都有明确的进度显示
- **更好的错误处理**: 每个步骤都有独立的错误处理机制
- **简化的架构**: 不需要启动多个Agent服务
- **更好的用户体验**: 实时显示处理进度和状态

## 系统架构

### 工作流版本
- **前端界面**: Streamlit Web应用 (`ui_workflow.py`)
- **工作流引擎**: 合同处理工作流 (`contract_workflow.py`)
- **文档处理**: MCP服务（支持OCR识别）
- **AI分析**: 直接调用大模型API进行风险分析
- **结果整合**: 综合分析报告生成

### 多Agent版本
- **前端界面**: Streamlit Web应用 (`ui_app.py`)
- **文档处理**: MCP服务（支持OCR识别）
- **AI分析**: 多个专业智能体
  - 法律专家：识别法律风险
  - 商业专家：分析商业条款
  - 格式专家：检查文档格式
- **结果整合**: 综合分析报告生成

## 技术栈

- Python 3.8+
- Streamlit (Web界面)
- FastAPI (MCP服务框架)
- OpenAI API (AI分析)
- PaddleOCR (文档识别)
- PyMuPDF (PDF处理)

## 文件说明

- `contract_workflow.py`: 工作流版本的核心处理逻辑
- `ui_workflow.py`: 工作流版本的Web界面
- `mcp_service.py`: MCP文档处理服务
- `agents.py`: 多Agent版本的服务
- `ui_app.py`: 多Agent版本的Web界面
- `contracts/`: 样例合同文件目录
- `contract_analysis_results/`: 分析结果保存目录

## 使用建议

- **新用户**: 推荐使用工作流版本，界面更清晰，操作更简单
- **高级用户**: 可以选择多Agent版本，支持更复杂的并行处理
- **开发调试**: 工作流版本更容易调试和维护

## 注意事项

- 确保网络连接正常，系统需要调用AI服务
- 大文件处理可能需要较长时间
- 建议在Windows环境下运行以获得最佳兼容性
- 工作流版本只需要启动MCP服务，多Agent版本需要启动所有Agent服务
